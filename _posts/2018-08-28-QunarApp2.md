---
layout: post
title: "Vue2.5仿去哪儿app 实战项目笔记"
subtitle: "swiper的自动构建 "
date: 2018-08-28 14:00:00
author: "wantingtr"
tags:
    - 前端
    - Vue.js
---
# Vue2.5仿去哪儿app 实战项目笔记
## swiper的自动构建

&nbsp;

## swiper的自动构建
在首页的icon页面下，默认一个页面中包括8个图标。而我们希望若当页面中有9个图标时，可以左右拖动，形成轮播图的效果。而且我们希望页面能够**自动计算和适配图标与轮播图**，当图标数目变化时，轮播图也跟着相应变化。    
所以应该设定两个v-for指令。分别遍历页面与图标。  
`<swiper-slide v-for="(page,index) of pages" :key="index">`  
`<div class="icon" v-for="item of page" :key="item.id">`

```html
<div class="icons">
  <swiper>
    <swiper-slide v-for="(page,index) of pages" :key="index">
      <!--包括两个v-for指令，第一个是根据页面数，在pages中遍历每一个轮播图页面。-->
      <div class="icon"
           v-for="item of page"
           :key="item.id">
           <!--第二个是在一个页面（page）内遍历8个图标-->
        <div class="icon-img">
          <img class="icon-img-content" :src='item.imgUrl' alt="">
        </div>
        <p class="icon-text">{{item.icontext}}</p>
      </div>
    </swiper-slide>
  </swiper>
</div>
```  

利用计算属性，来实现根据图标数目自动构建页码，实现多页切换的轮播图效果。
```js
computed: {
  pages () {
    const pages = []
    this.iconList.forEach((item, index) => {
      const page = Math.floor(index / 8)//向下取整
      // 计算当前index所处页面page,一个页面包括8个icons
      if (!pages[page]) {
        pages[page] = []
        // 当前page溢出，新建页面
      }
      pages[page].push(item)
    })
    return pages
    // 根据数据自动构建页码，实现多页切换的轮播图
  }
}
```
